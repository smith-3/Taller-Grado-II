%%{init: {
  "theme": "base",
  "themeVariables": {
    "fontSize": "14px",
    "fontFamily": "Arial, sans-serif",
    "lineColor": "#4A90E2"
  }
}}%%
flowchart TB
    %% C4 Nivel 4: CÃ³digo (F1)

    subgraph Domain["ðŸ“ domain / usecase"]
        AutoSync[[AutoSyncUseCase.kt]]:::code
        RefreshUC[[RefreshSubjectsForCareerUseCase.kt]]:::code
    end

    subgraph Data["ðŸ“ data layer"]
        subgraph Preferences["preferences"]
            SyncPrefs[[SyncPreferences.kt]]:::code
        end

        subgraph Remote["remote"]
            Scraper[[ScheduleScraper.kt]]:::code

            subgraph PDF["pdf"]
                Downloader[[PdfDownloader.kt]]:::code
                Extractor[[PdfExtractor.kt]]:::code
                Parser[[PdfParser.kt]]:::code
            end
        end

        subgraph Local["local"]
            DAOs[(DAOs *.kt)]:::database
        end

        ImportUC[[ImportCareerSchedulesUseCase.kt]]:::code
    end

    %% Relaciones
    AutoSync --> Scraper
    AutoSync --> RefreshUC
    AutoSync --> SyncPrefs

    RefreshUC --> ImportUC

    ImportUC --> Downloader --> Extractor --> Parser
    ImportUC --> DAOs

    %% Estilos
    classDef code fill:#E8F4FD,stroke:#4A90E2,stroke-width:2px,rx:6,ry:6,color:#333;
    classDef database fill:#E7F8ED,stroke:#3FAA66,stroke-width:2px,color:#222;
